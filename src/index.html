<!DOCTYPE html>
<html lang="en">
<head>
  <title>Relm - A Gameworld for Teamwork!</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

  <!-- THREEjs is a core dependency, load it first -->
  <script src="//cdn.jsdelivr.net/npm/three@0.114.0/build/three.js"></script>
  <!-- If the CDN fails (e.g. offline mode, server down, internet down?) load locally -->
  <script>window.THREE || document.write('<script src="vendor/three-r114.min.js"><\/script>')</script>
  
  <link rel="stylesheet" type="text/css" href="./dropzone.css">
  <link rel="stylesheet" type="text/css" href="./index.css">
  
  <style>
  html, body {
    width: 100%; height: 100%; font-family: Verdana, Geneva, Tahoma, sans-serif;
  }
  body::after{
    /* Hide & pre-cache some CSS images: */
    width: 0; height: 0; z-index: -1;
    position: absolute;
    overflow: hidden;
    content:
      url(./icons/muted.png)
      url(./icons/unmuted.png)
    ;
  }
  .hide { display: none !important; }
  </style>
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-166245735-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-166245735-1');
  </script>
  
</head>
<body style="margin: 0px; background-color: #bbbbbb; overflow: hidden;">

  <!-- The GL Canvas element goes inside here -->
  <div id="game"></div>

  <div id="right-panel">
    
    <div id="my-character" class="panel-button button">My Character</div>
    <!-- <div id="invite" class="panel-button button">Invite Others</div> -->
    <div id="invitation" class="panel-subpanel">Copy One-Time Link: <input id="invitation-input"/></div>
    <button id="upload-button" class="panel-button button">Upload</button>
    <div id="help-button" class="panel-button button">Help</div>

    <div id="help-panel" class="panel-subpanel">
      <h2>Welcome!</h2>
      <p>We're under construction, but if you want to kick the tires here are some advanced commands you can use:</p>
      
      <h2>General Stuff with Objects</h2>
      <p>First, click an object so it shines bright yellow, then try one of these:</p>
      <p>Move it with the mouse: this moves the object in the X/Z directions</p>

      <div>
        <p>Get information about an object:<pre>/object info</pre> (Note that you can also right-click an object to get the same info).</p>
      </div>
      
      <h3>Scaling & Rotating</h3>
      
      <div>
        <p>Grow or shrink an object (N should be between about 0.5 and 2):<pre>/object scale [N]</pre></p>
        <p>You can also scale in just one dimension:<pre>/object scalex|scaley|scalez [N]</pre></p>
      </div>
      
      <div>
        <p>Change flat object orientation:<pre>/object orient up|down|left|right</pre></p>
      </div>
      
      <div>
        <p>Rotate an object:<pre>/object rotatex|rotatey|rotatez [DEGREES]</pre></p>
      </div>
      
      <h3>Moving Objects</h3>
      
      <div>
        <p>Bring object to you:<pre>/object fetch</pre></p>
      </div>

      <div>
        <p>Move an along an axis:<pre>/object x|y|z [UNITS]</pre></p>
      </div>

      <div>
        <p>You can also move an object to absolute position:<pre>/object to [X] [Y] [Z]</pre></p>
      </div>
      
      <h3>Misc. Object Capabilities</h3>
      
      <div>
        <p>Delete an object<pre>/object delete</pre></p>
      </div>
      
      <div>
        <p>Clone (duplicate) an object:<pre>/object clone [COUNT]</pre>(<pre class="inline">[COUNT]</pre> is optional, default is 1)</p>
      </div>
      
      <div>
        <p>Flip the texture on an object:<pre>/object flip x|y</pre></p>
      </div>
      
      <div>
        <p>Fold a flat object so that part of it is on the ground:<pre>/object fold [PERCENT]</pre>(<pre class="inline">[PERCENT]</pre> is a number from 0 to 1)</p>
      </div>
      
      <div>
        <p>Lock or unlock and object:<pre>/object lock|unlock</pre></p>
      </div>
      
      <div>
        <p>Change the material type of a 2D object:<pre>/object material default|photo|add|subtract|multiply</pre></p>
      </div>
      
      <div>
        <p>Change the layer of a 2D object:<pre>/object layer [N]</pre>(<pre class="inline">[N]</pre> is a number between 0 and 100)</p>
      </div>
      
      
      <h2>Special Objects</h2>


      <h3>Portals</h3>
      
      <div>
        <p>Create a portal:<pre>/portal create [RELM] [X] [Z]</pre>(<pre class="inline">[RELM]</pre> is optional and is the name of a relm, e.g. 'welcome' would teleport to https://relm.us/welcome). <pre class="inline">[X]</pre> and <pre class="inline">[Z]</pre> are optional as well.</p>
      </div>
      
      <div>
        <p>Update a selected portal:<pre>/portal update [RELM] [X] [Z]</pre></p>
      </div>
      
      
      <h3>Trigger Plates</h3>
      
      <div>
        <p>Create a trigger:<pre>/trigger create [JSON]</pre>(<pre class="inline">[JSON]</pre> is exported JSON. See the <pre class="inline">/export</pre> command.</p>
      </div>
      
      <div>
        <p>Update a trigger:<pre>/trigger update [JSON]</pre></p>
      </div>
      

      <h3>Diamond Indicators</h3>
      
      <div>
        <p>Create a diamond:<pre>/diamond create [MESSAGE]</pre></p>
      </div>
      
      <div>
        <p>Set a message on a selected diamond:<pre>/diamond message [MESSAGE]</pre></p>
      </div>
      
      <div>
        <p>Set a label on a selected diamond:<pre>/diamond label [LABEL]</pre></p>
      </div>
      

      <h3>Ground</h3>
      
      <div>
        <p>Create a section of ground:<pre>/ground create [TEXTURE_URL]</pre>(<pre class="inline">[TEXTURE_URL]</pre> is an optional URL of an image that will be used for a repeating ground texture. It must begin with https://...)</p>
      </div>
      
      <div>
        <p>Change the size of a selected section of ground:<pre>/ground size [N]</pre></p>
      </div>
      
      <div>
        <p>Change the color of a selected section of ground:<pre>/ground color [HEX]</pre>(<pre class="inline">[HEX]</pre> is a CSS hex color, e.g. '#FFFFFF' for white)</p>
        <p>Change the texture image of a selected section of ground:<pre>/ground texture [TEXTURE_URL]</pre></p>
        <p>Change the texture's repeat frequency:<pre>/ground repeat [N]</pre></p>
      </div>
      
      <div>
        <p>Change the type of a selected section of ground:<pre>/ground type circle|square|rough</pre>(Note: <pre class="inline">rough</pre> means a 'roughly circular' shape.)</p>
        <p>Change the 'roughly circular' random seed:<pre>/ground random [N]</pre>(<pre class="inline">[N]</pre> is optional)</p>
      </div>
      

      <h3>Skybox</h3>
      
      <div>
        <p>Change the skybox:<pre>/skybox [IMAGE_URL]</pre></p>
      </div>

      
      <h2>Import / Export</h2>
      
      <div>
        <p>Export the world, or just the selected objects:<pre>/export</pre>(Then copy the JSON)</p>
        <p>Import into the world:<pre>/import</pre>(Then paste exported JSON in to the box)</p>
      </div>
      
      
      <h2>Selection</h2>

      <div>
        <p>Select all:<pre>/select all</pre>(Note: you can also use ctrl+A or cmd+A)</p>
        <p>Select none:<pre>/select none</pre>(Note: you can also press ESC)</p>
      </div>
      
      <div>
        <p>Select locked:<pre>/select locked</pre>(Selects just the locked objects in the relm)</p>
        <p>Select unlocked:<pre>/select unlocked</pre>(Selects just the unlocked objects in the relm)</p>
      </div>


      <h2>Misc.</h2>
      
      <div>
        <p>Find out what your coordinates are:<pre>/whereami</pre></p>
        <p>Go to specified coordinates:<pre>/go [RELM] [X] [Z]</pre>(If <pre class="inline">[RELM]</pre> is omitted, you will stay in the current relm)</p>
      </div>
      
      <div>
        <p>Change major mode:<pre>/mode editor|normal</pre></p>
      </div>
      
      <div>
        <p>Reset everything about your character (clears localStorage):<pre>/reset</pre></p>
      </div>
      
      <div>
        <p>Snap to grid:<pre>/snap [SIZE]</pre>(If <pre class="inline">[SIZE]</pre> is left blank, turns off snap-to-grid)</p>
      </div>
      
    </div>
  </div>
  
  <div id="previews" class="dropzone dropzone-previews"></div>

  <div id="press-tab-help">
    <i class="down" style="border-color:#efef22; position: absolute; bottom: -10px;"></i>
    Press Enter to Type
  </div>

  <div id="progress-bar">Loading...</div>
  <div id="typing">
    <svg class="mobile translucent front" id="control-pad" viewBox="0 0 135 135" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" draggable="false">
      <g><circle cx="67.259" cy="67.259" r="63.009" style="stroke:#ebebeb;stroke-width:7.5px;"></circle>
        <path class="pad-top" d="M67.198,56.462c-5.192,-0.166 -11.916,-6.666 -13.555,-9.64c-1.767,-3.207 -1.894,-17.136 -1.979,-25.608c-0.063,-6.147 8.016,-6.735 8.033,-6.737l15.123,0c0,0 8.096,0.583 8.034,6.737c-0.086,8.472 -0.213,22.401 -1.98,25.608c-1.645,2.986 -8.415,9.525 -13.615,9.641l-0.061,-0.001Z"></path>
        <path class="pad-right" d="M78.056,67.198c0.166,-5.192 6.665,-11.916 9.64,-13.555c3.207,-1.767 17.136,-1.894 25.607,-1.979c6.148,-0.063 6.736,8.016 6.737,8.033l0,15.123c0,0 -0.583,8.096 -6.737,8.034c-8.471,-0.086 -22.4,-0.213 -25.607,-1.98c-2.986,-1.645 -9.525,-8.415 -9.642,-13.615l0.002,-0.061Z"></path>
        <path class="pad-bottom" d="M67.32,78.056c5.192,0.166 11.916,6.665 13.554,9.64c1.767,3.207 1.894,17.136 1.98,25.607c0.062,6.148 -8.016,6.736 -8.034,6.737l-15.123,0c0,0 -8.096,-0.583 -8.033,-6.737c0.085,-8.471 0.212,-22.4 1.979,-25.607c1.645,-2.986 8.416,-9.525 13.616,-9.642l0.061,0.002Z"></path>
        <path class="pad-left" d="M56.462,67.32c-0.166,5.192 -6.666,11.916 -9.64,13.554c-3.207,1.767 -17.136,1.894 -25.608,1.98c-6.147,0.062 -6.735,-8.016 -6.737,-8.034l0,-15.123c0,0 0.583,-8.096 6.737,-8.033c8.472,0.085 22.401,0.212 25.608,1.979c2.986,1.645 9.525,8.416 9.641,13.616l-0.001,0.061Z"></path>
      </g>
    </svg>

    <svg class="mobile translucent front" id="control-button" style="width: 10em; height: 10em; position: fixed; right: 0.5em; margin-top:-10.5em;" viewBox="0 0 65 65" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" draggable="false">
        <circle cx="32.452" cy="32.452" r="28.702" style="stroke:#ebebeb;stroke-width:7.5px;"></circle>
    </svg>

    <input id="input" type="text" placeholder="What's on your mind? ..." value="">
  </div>
  

  <div id="import-export" class="hide">
    <textarea id="import-export-data"></textarea>
    <div class="button-panel">
      <div id="export-only-selected">
        <input type="checkbox" id="export-only-selected-checkbox">
        <label for="export-only-selected-checkbox">Export Selected Objects Only</label>
      </div>
      <button id="import-button" class="button">Import into this relm</button>
      <button id="import-export-close-button" class="button">Close</button>
    </div>
  </div>


  <div id="avatars" class="hide">
    <div class="title">Choose your character:</div>
    <div class="avatars-row">
      <button class="avatar-button f" data-gender="f" data-index="0"><img src="./avatars/f0.jpg"></button>
      <button class="avatar-button f" data-gender="f" data-index="1"><img src="./avatars/f1.jpg"></button>
      <button class="avatar-button f" data-gender="f" data-index="2"><img src="./avatars/f2.jpg"></button>
      <button class="avatar-button f" data-gender="f" data-index="3"><img src="./avatars/f3.jpg"></button>
      <button class="avatar-button f" data-gender="f" data-index="4"><img src="./avatars/f4.jpg"></button>
      <button class="avatar-button f" data-gender="f" data-index="5"><img src="./avatars/f5.jpg"></button>
      <button class="avatar-button f" data-gender="f" data-index="6"><img src="./avatars/f6.jpg"></button>
      <button class="avatar-button f" data-gender="f" data-index="7"><img src="./avatars/f7.jpg"></button>
      <button class="avatar-button f" data-gender="f" data-index="8"><img src="./avatars/f8.jpg"></button>
      <button class="avatar-button m" data-gender="m" data-index="0"><img src="./avatars/m0.jpg"></button>
      <button class="avatar-button m" data-gender="m" data-index="1"><img src="./avatars/m1.jpg"></button>
      <button class="avatar-button m" data-gender="m" data-index="2"><img src="./avatars/m2.jpg"></button>
      <button class="avatar-button m" data-gender="m" data-index="3"><img src="./avatars/m3.jpg"></button>
      <button class="avatar-button m" data-gender="m" data-index="4"><img src="./avatars/m4.jpg"></button>
      <button class="avatar-button m" data-gender="m" data-index="5"><img src="./avatars/m5.jpg"></button>
      <button class="avatar-button m" data-gender="m" data-index="6"><img src="./avatars/m6.jpg"></button>
      <button class="avatar-button m" data-gender="m" data-index="7"><img src="./avatars/m7.jpg"></button>
      <button class="avatar-button m" data-gender="m" data-index="8"><img src="./avatars/m8.jpg"></button>
    </div>
    <div class="button-panel">
      <button id="avatars-close" class="button">Close</button>
    </div>
  </div>

  <script>
    const helpPanel = document.getElementById('help-panel')
    const helpButton = document.getElementById('help-button')
    helpButton.addEventListener('mousedown', (event) => {
      if (helpPanel.classList.contains('show')) {
        helpPanel.classList.remove('show')
      } else {
        helpPanel.classList.add('show')
      }
      // make it so clicking doesn't take focus off of the game canvas
      event.preventDefault()
    })
    

  </script>
  <script src="./index.js"></script>
  
  <!-- Lib Jitsi Meet is availabble as an include from their site -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.0/dist/jquery.min.js"></script>
  <script src="https://meet.jit.si/libs/lib-jitsi-meet.min.js"></script>

  
</body>
</html>
